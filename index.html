<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <!-- <script src="./test.js"></script> -->
    <script>
        //  function xuanze(arr) {
        //      debugger
        // 	for (let i = 0; i < arr.length; i++) {
        // 		for (let j = i; j < arr.length; j++) {
        // 			if (arr[i] > arr[j]) {
        // 				[ arr[j], arr[i] ] = [ arr[i], arr[j] ];
        // 			}
        // 		}
        // 	}
        // 	return arr;
        // }

        //          function  kuaipai(arr){
        // 	debugger
        //  if(arr.length<=1){
        // 	 return arr;
        //  }
        // 	var left = []
        // 	var right = []
        // 	var current = arr.splice(0,1)
        // 	for (let i = 0; i < arr.length; i++) {
        // 		 if(arr[i]<current){
        // 			 left.push(arr[i])
        // 		 }else{
        // 			right.push(arr[i])

        // 		 }
        // 	}
        // 	return  kuaipai(left).concat(current,kuaipai(right))

        // }
        // kuaipai([1,3,2,1 ])
        // console.log();
        // let phrase = "Hello";

        // if (true) {
        //   let user = "John";

        //   function sayHi() {
        //     console.log(`${phrase}, ${user}`);
        //   }
        // }
        function jsonStringfy(data) {
            let type = typeof data //先确定好data类型
            if (type !== 'object') {

                let result = data
                if (Number.isNaN(data) || data == Infinity) {
                    result = "null"
                } else if (type === 'function' || type == 'undefined' || type == 'symbol') {
                    return undefined
                } else if (type == 'string') {
                    result = '"' + data + '"'
                }
                return String(result)
            } else if (type === 'object') {
                if (data == null) {
                    return "null"
                } else if (data.toJSON && typeof data.toJSON == 'function') {
                    return jsonStringfy(data.toJSON())//对象如果有这个toJSON方法会被调用
                } else if (data instanceof Array) {
                    let result = []
                    data.forEach((item, index) => {
                        if (typeof item === 'undefined' || typeof item === 'symbol' || typeof item === 'function') {
                            result[index] = 'null'
                        } else {
                            result[index] = jsonStringfy(item)
                        }
                    })
                    //    result =  "["+ result+ "]"
                    return "[" + result.join() + "]" //[1,"23",null,]
                } else {
                    let result = []
                    Object.keys(data).forEach((item, index) => {
                        if (typeof item !== 'symbol') {
                            if (data[item] !== undefined && typeof data[item] !== 'function' && typeof data[item] !== 'symbol') {
                                result.push('"' + item + '":' + jsonStringfy(data[item]))
                            }
                        }
                    })
                    return "{"+ result+"}"
                }
            }

        }
        let json = [1, '23', function () { }, { a: 1, b: 2,function () { } }]
        console.log(jsonStringfy(json));
        console.log(JSON.stringify(json));
// sayHi();

    </script>
</body>

</html>